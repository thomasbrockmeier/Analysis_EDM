Preliminary analysis
========================================================
Timbre similarity
-------------------------------------------------------

### Data cleanup


```
## Loading required package: psych
```
As a first step into the analysis of the data obtained via the Survey Gizmo (*n* = 42) online
platform, we needed to clean up the data. To achieve this, I followed a number of
steps:

1. A function ([reliability.check.R](https://github.com/dilopez1/Cleaning_scripts_R/blob/master/reliability.check.R))
compares the repeated elements at the beginning and end of the experiment for each participant, which
should be equal (within a Â±1 margin). This leaves us with 35 cases.
2. A script ([clean.data.R](https://github.com/dilopez1/Cleaning_scripts_R/blob/master/clean.data.R)) extracts only the ratings given for each pair of segments. This function has the option to remove the ratings where the rater was "Not confident"
(confidence level 1) about his/her answer, or get the data as-is. When confidence level 1
scores are taken into account, the least number of ratings a pair has is 8
and the largest number is 15. On the other hand, when confidence level
1 scores are removed, the number of ratings ranges between 7 and
15.
3. Another database was generated by polarizing the 4-point based ratings into
"Dissimilar" (1) and "Similar" (2).

With this clean database, I ran some statistical analyses to find interesting trends.

## Fleiss' Kappa

Fleiss' Kappa assesses the reliability of agreement between a set number of raters. 
In our case, the raters were exposed to a fraction of the total amount of pairs,
hence our incomplete database. I wrote fleiss.EDM.R to pick the minimum number of ratings
at random for all pairs, and get the Kappa statistic. Since it is random, it is performed
as many times as needed by entering the number of iterations. The function outputs
the descriptive statistics of the list made from the Kappa value of each of the
iterations.

### Example
#### 4-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
fexample <- fleiss.EDM(data=rtim, conf.1.rm=FALSE, polarize=FALSE, iterations=1000)
```

```
## Loading required package: irr
## Loading required package: lpSolve
```

```
##                    vars    n mean   sd median trimmed  mad  min  max range
## X0.156440624672466    1 1000 0.16 0.01   0.16    0.16 0.01 0.12 0.19  0.08
##                    skew kurtosis se
## X0.156440624672466 0.09    -0.15  0
```

Here we can observe how out of the 1000 iterations, we obtained a *mean*
of **0.16**, a *minimum* of **0.12**, and a *maximum* of **0.19**.

#### 2-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
fexample <- fleiss.EDM(data=rtim, conf.1.rm=FALSE, polarize=TRUE, iterations=1000)
```

```
##                    vars    n mean   sd median trimmed  mad  min  max range
## X0.117697793609521    1 1000 0.13 0.01   0.13    0.13 0.01 0.09 0.17  0.08
##                    skew kurtosis se
## X0.117697793609521 0.03    -0.27  0
```

Here we can observe how out of the 1000 iterations, we obtained a *mean*
of **0.13**, a *minimum* of **0.09**, and a *maximum* of **0.17**.

## Interclass Correlation Coefficient

Another measure for reliability of agreement between (and also within) raters is
the Interclass Correlation Coefficient (ICC). This measure stands apart from other
agreement measures because of its ability to analyze **exchangeable measurements**.
This means that it takes into account systematic differences among observer, thanks
to its nature as a correlation. However, unlike most correlations, ICC works not only with pairs,
but also with larger groups.

The function icc.EDM.R uses the same procedure as fleiss.EDM.R, where ratings are
chosen at random, and the the computation of the ICC statistic is made any number
of times as deemed necessary.

### Example
#### 4-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
icc.EDM(data=rtim, conf.1.rm=FALSE, polarize=FALSE, iterations=1000)
```

```
##      type                ICC              F             df1     
##  Length:1000        Min.   :0.123   Min.   :2.12   Min.   :189  
##  Class :character   1st Qu.:0.148   1st Qu.:2.39   1st Qu.:189  
##  Mode  :character   Median :0.157   Median :2.49   Median :189  
##                     Mean   :0.157   Mean   :2.49   Mean   :189  
##                     3rd Qu.:0.165   3rd Qu.:2.59   3rd Qu.:189  
##                     Max.   :0.194   Max.   :2.92   Max.   :189  
##       df2             p             lower bound      upper bound   
##  Min.   :1330   Min.   :0.00e+00   Min.   :0.0828   Min.   :0.171  
##  1st Qu.:1330   1st Qu.:0.00e+00   1st Qu.:0.1057   1st Qu.:0.200  
##  Median :1330   Median :0.00e+00   Median :0.1134   Median :0.209  
##  Mean   :1330   Mean   :1.17e-16   Mean   :0.1135   Mean   :0.209  
##  3rd Qu.:1330   3rd Qu.:0.00e+00   3rd Qu.:0.1211   3rd Qu.:0.219  
##  Max.   :1330   Max.   :2.92e-14   Max.   :0.1466   Max.   :0.249
```

#### 2-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
icc.EDM(data=rtim, conf.1.rm=FALSE, polarize=TRUE, iterations=1000)
```

```
##      type                ICC               F             df1     
##  Length:1000        Min.   :0.0873   Min.   :1.76   Min.   :189  
##  Class :character   1st Qu.:0.1253   1st Qu.:2.15   1st Qu.:189  
##  Mode  :character   Median :0.1346   Median :2.24   Median :189  
##                     Mean   :0.1348   Mean   :2.25   Mean   :189  
##                     3rd Qu.:0.1439   3rd Qu.:2.35   3rd Qu.:189  
##                     Max.   :0.1808   Max.   :2.77   Max.   :189  
##       df2             p             lower bound      upper bound   
##  Min.   :1330   Min.   :0.00e+00   Min.   :0.0515   Min.   :0.131  
##  1st Qu.:1330   1st Qu.:0.00e+00   1st Qu.:0.0852   1st Qu.:0.174  
##  Median :1330   Median :0.00e+00   Median :0.0935   Median :0.185  
##  Mean   :1330   Mean   :1.40e-11   Mean   :0.0936   Mean   :0.185  
##  3rd Qu.:1330   3rd Qu.:0.00e+00   3rd Qu.:0.1017   3rd Qu.:0.195  
##  Max.   :1330   Max.   :1.29e-08   Max.   :0.1349   Max.   :0.235
```

## Within Participant Concordance
Another part of the project was to investigate if subjects could rate the same
segment pairs consistently. We asked one participant to rate the same 18 segments
six times. The analysis was made with both 4-point and 2-point scales.

### 4-point scale analysis


```r
timbreWPC <- read.csv("timbreWPC.csv")
kappam.fleiss(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Fleiss' Kappa for m Raters
## 
##  Subjects = 18 
##    Raters = 6 
##     Kappa = 0.544 
## 
##         z = 14.4 
##   p-value = 0
```

```r
icc(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Single Score Intraclass Correlation
## 
##    Model: oneway 
##    Type : consistency 
## 
##    Subjects = 18 
##      Raters = 6 
##      ICC(1) = 0.792
## 
##  F-Test, H0: r0 = 0 ; H1: r0 > 0 
##    F(17,90) = 23.8 , p = 3.88e-26 
## 
##  95%-Confidence Interval for ICC Population Values:
##   0.654 < ICC < 0.901
```

### 2-point scale analysis


```r
timbreWPC[timbreWPC == 2] <- 1 ; timbreWPC[timbreWPC == 3 | timbreWPC == 4] <- 2
kappam.fleiss(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Fleiss' Kappa for m Raters
## 
##  Subjects = 18 
##    Raters = 6 
##     Kappa = 0.643 
## 
##         z = 10.6 
##   p-value = 0
```

```r
icc(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Single Score Intraclass Correlation
## 
##    Model: oneway 
##    Type : consistency 
## 
##    Subjects = 18 
##      Raters = 6 
##      ICC(1) = 0.657
## 
##  F-Test, H0: r0 = 0 ; H1: r0 > 0 
##    F(17,90) = 12.5 , p = 5.56e-17 
## 
##  95%-Confidence Interval for ICC Population Values:
##   0.477 < ICC < 0.824
```

Rhythm similarity
-------------------------------------------------------

For the rhythm experiment, Thomas has already analyzed the data with Fleiss' Kappa.
Here I will use the ICC function to gain some new insights on it.



#### 4-point scale

```r
# The current raw dataset was loaded as "rrhy"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
icc.EDM(data=rrhy, conf.1.rm=FALSE, polarize=FALSE, iterations=1000)
```

```
##      type                ICC              F             df1     
##  Length:1000        Min.   :0.241   Min.   :4.17   Min.   :189  
##  Class :character   1st Qu.:0.279   1st Qu.:4.88   1st Qu.:189  
##  Mode  :character   Median :0.292   Median :5.12   Median :189  
##                     Mean   :0.292   Mean   :5.14   Mean   :189  
##                     3rd Qu.:0.306   3rd Qu.:5.40   3rd Qu.:189  
##                     Max.   :0.353   Max.   :6.46   Max.   :189  
##       df2             p      lower bound     upper bound   
##  Min.   :1710   Min.   :0   Min.   :0.194   Min.   :0.296  
##  1st Qu.:1710   1st Qu.:0   1st Qu.:0.229   1st Qu.:0.337  
##  Median :1710   Median :0   Median :0.241   Median :0.350  
##  Mean   :1710   Mean   :0   Mean   :0.242   Mean   :0.351  
##  3rd Qu.:1710   3rd Qu.:0   3rd Qu.:0.254   3rd Qu.:0.365  
##  Max.   :1710   Max.   :0   Max.   :0.299   Max.   :0.414
```

#### 2-point scale

```r
# The current raw dataset was loaded as "rrhy"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
icc.EDM(data=rrhy, conf.1.rm=FALSE, polarize=TRUE, iterations=1000)
```

```
##      type                ICC              F             df1     
##  Length:1000        Min.   :0.244   Min.   :4.23   Min.   :189  
##  Class :character   1st Qu.:0.284   1st Qu.:4.96   1st Qu.:189  
##  Mode  :character   Median :0.297   Median :5.22   Median :189  
##                     Mean   :0.298   Mean   :5.26   Mean   :189  
##                     3rd Qu.:0.312   3rd Qu.:5.53   3rd Qu.:189  
##                     Max.   :0.367   Max.   :6.80   Max.   :189  
##       df2             p      lower bound     upper bound   
##  Min.   :1710   Min.   :0   Min.   :0.197   Min.   :0.300  
##  1st Qu.:1710   1st Qu.:0   1st Qu.:0.233   1st Qu.:0.342  
##  Median :1710   Median :0   Median :0.246   Median :0.356  
##  Mean   :1710   Mean   :0   Mean   :0.247   Mean   :0.357  
##  3rd Qu.:1710   3rd Qu.:0   3rd Qu.:0.260   3rd Qu.:0.371  
##  Max.   :1710   Max.   :0   Max.   :0.312   Max.   :0.428
```

As we can see, rhythm similarity shows a more promising panorama, with ICC values 
around 0.30, meaning a positive correlation of the data.
