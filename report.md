Preliminary analysis
========================================================

### Data cleanup


```
## Loading required package: psych
```
As a first step into the analysis of the data obtained via the Survey Gizmo (*n* = 42) online
platform, we needed to clean up the data. To achieve this, I followed a number of
steps:

1. A function ([reliability.check.R](https://github.com/dilopez1/Cleaning_scripts_R/blob/master/reliability.check.R))
compares the repeated elements at the beginning and end of the experiment for each participant, which
should be equal (within a Â±1 margin). This leaves us with 35 cases.
2. A script ([clean.data.R](https://github.com/dilopez1/Cleaning_scripts_R/blob/master/clean.data.R)) extracts only the ratings given for each pair of segments. This function has the option to remove the ratings where the rater was "Not confident"
(confidence level 1) about his/her answer, or get the data as-is. When confidence level 1
scores are taken into account, the least number of ratings a pair has is 8
and the largest number is 15. On the other hand, when confidence level
1 scores are removed, the number of ratings ranges between 7 and
15.
3. Another database was generated by polarizing the 4-point based ratings into
"Dissimilar" (1) and "Similar" (2).

With this clean database, I ran some statistical analyses to find interesting trends.

## Fleiss' Kappa

Fleiss' Kappa assesses the reliability of agreement between a set number of raters. 
In our case, the raters were exposed to a fraction of the total amount of pairs,
hence our incomplete database. I wrote fleiss.EDM.R to pick the minimum number of ratings
at random for all pairs, and get the Kappa statistic. Since it is random, it is performed
as many times as needed by entering the number of iterations. The function outputs
the descriptive statistics of the list made from the Kappa value of each of the
iterations.

### Example
#### 4-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
fexample <- fleiss.EDM(data=rtim, conf.1.rm=FALSE, polarize=FALSE, iterations=200)
```

```
## Loading required package: irr
## Loading required package: lpSolve
```

```
##                  vars   n mean   sd median trimmed  mad  min  max range
## X0.1390065913371    1 200 0.15 0.01   0.15    0.16 0.01 0.12 0.19  0.07
##                   skew kurtosis se
## X0.1390065913371 -0.08    -0.14  0
```

Here we can observe how out of the 200 iterations, we obtained a *mean*
of **0.15**, a *minimum* of **0.12**, and a *maximum* of **0.19**.

#### 2-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
fexample <- fleiss.EDM(data=rtim, conf.1.rm=FALSE, polarize=TRUE, iterations=200)
```

```
##                    vars   n mean   sd median trimmed  mad min  max range
## X0.149716734238915    1 200 0.13 0.01   0.13    0.13 0.01 0.1 0.16  0.06
##                     skew kurtosis se
## X0.149716734238915 -0.02    -0.22  0
```

Here we can observe how out of the 200 iterations, we obtained a *mean*
of **0.13**, a *minimum* of **0.1**, and a *maximum* of **0.16**.

## Interclass Correlation Coefficient

Another measure for reliability of agreement between (and also within) raters is
the Interclass Correlation Coefficient (ICC). This measure stands apart from other
agreement measures because of its ability to analyze **exchangeable measurements**.
This means that it takes into account systematic differences among observer, thanks
to its nature as a correlation. However, unlike most correlations, ICC works not only with pairs,
but also with larger groups.

The function icc.EDM.R uses the same procedure as fleiss.EDM.R, where ratings are
chosen at random, and the the computation of the ICC statistic is made any number
of times as deemed necessary.

### Example
#### 4-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
iccexample <- icc.EDM(data=rtim, conf.1.rm=FALSE, polarize=FALSE, iterations=200)
```

```
##      type                ICC              F             df1     
##  Length:200         Min.   :0.126   Min.   :2.15   Min.   :189  
##  Class :character   1st Qu.:0.147   1st Qu.:2.38   1st Qu.:189  
##  Mode  :character   Median :0.155   Median :2.47   Median :189  
##                     Mean   :0.156   Mean   :2.48   Mean   :189  
##                     3rd Qu.:0.165   3rd Qu.:2.58   3rd Qu.:189  
##                     Max.   :0.189   Max.   :2.87   Max.   :189  
##       df2             p             lower bound      upper bound   
##  Min.   :1330   Min.   :0.00e+00   Min.   :0.0856   Min.   :0.175  
##  1st Qu.:1330   1st Qu.:0.00e+00   1st Qu.:0.1046   1st Qu.:0.198  
##  Median :1330   Median :0.00e+00   Median :0.1120   Median :0.207  
##  Mean   :1330   Mean   :6.70e-17   Mean   :0.1126   Mean   :0.208  
##  3rd Qu.:1330   3rd Qu.:0.00e+00   3rd Qu.:0.1207   3rd Qu.:0.218  
##  Max.   :1330   Max.   :7.99e-15   Max.   :0.1425   Max.   :0.244
```

#### 2-point scale

```r
# The current raw dataset was loaded as "rtim"
# The variable "conf.1.rm" stands for "confidence level 1: remove"
# The variable "polarize" changes the data from 4-point base to 2-point base.
iccexample <- icc.EDM(data=rtim, conf.1.rm=FALSE, polarize=TRUE, iterations=200)
```

```
##      type                ICC              F             df1     
##  Length:200         Min.   :0.106   Min.   :1.95   Min.   :189  
##  Class :character   1st Qu.:0.128   1st Qu.:2.17   1st Qu.:189  
##  Mode  :character   Median :0.135   Median :2.24   Median :189  
##                     Mean   :0.135   Mean   :2.25   Mean   :189  
##                     3rd Qu.:0.144   3rd Qu.:2.34   3rd Qu.:189  
##                     Max.   :0.166   Max.   :2.59   Max.   :189  
##       df2             p             lower bound      upper bound   
##  Min.   :1330   Min.   :0.00e+00   Min.   :0.0680   Min.   :0.152  
##  1st Qu.:1330   1st Qu.:0.00e+00   1st Qu.:0.0872   1st Qu.:0.177  
##  Median :1330   Median :0.00e+00   Median :0.0935   Median :0.185  
##  Mean   :1330   Mean   :2.13e-13   Mean   :0.0935   Mean   :0.185  
##  3rd Qu.:1330   3rd Qu.:4.00e-15   3rd Qu.:0.1016   3rd Qu.:0.195  
##  Max.   :1330   Max.   :1.97e-11   Max.   :0.1216   Max.   :0.219
```

## Within Participant Concordance
Another part of the project was to investigate if subjects could rate the same
segment pairs consistently. We asked one participant to rate the same 18 segments
six times. The analysis was made with both 4-point and 2-point scales.

### 4-point scale analysis


```r
timbreWPC <- read.csv("timbreWPC.csv")
kappam.fleiss(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Fleiss' Kappa for m Raters
## 
##  Subjects = 18 
##    Raters = 6 
##     Kappa = 0.544 
## 
##         z = 14.4 
##   p-value = 0
```

```r
icc(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Single Score Intraclass Correlation
## 
##    Model: oneway 
##    Type : consistency 
## 
##    Subjects = 18 
##      Raters = 6 
##      ICC(1) = 0.792
## 
##  F-Test, H0: r0 = 0 ; H1: r0 > 0 
##    F(17,90) = 23.8 , p = 3.88e-26 
## 
##  95%-Confidence Interval for ICC Population Values:
##   0.654 < ICC < 0.901
```

### 2-point scale analysis


```r
timbreWPC[timbreWPC == 2] <- 1 ; timbreWPC[timbreWPC == 3 | timbreWPC == 4] <- 2
kappam.fleiss(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Fleiss' Kappa for m Raters
## 
##  Subjects = 18 
##    Raters = 6 
##     Kappa = 0.643 
## 
##         z = 10.6 
##   p-value = 0
```

```r
icc(ratings=t(timbreWPC[,seq(22, 57, 2)]))
```

```
##  Single Score Intraclass Correlation
## 
##    Model: oneway 
##    Type : consistency 
## 
##    Subjects = 18 
##      Raters = 6 
##      ICC(1) = 0.657
## 
##  F-Test, H0: r0 = 0 ; H1: r0 > 0 
##    F(17,90) = 12.5 , p = 5.56e-17 
## 
##  95%-Confidence Interval for ICC Population Values:
##   0.477 < ICC < 0.824
```
